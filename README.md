# MDT Memory & Roleplay Framework

> ä¸€ä¸ªèƒ½æŒç»­æ¼”åŒ–çš„åŒ»ç–—æ™ºèƒ½ä½“ç³»ç»Ÿï¼Œæ¨¡æ‹Ÿå¤šå­¦ç§‘å›¢é˜Ÿï¼ˆMDTï¼‰ä¼šè¯Šçš„å†³ç­–ååŒ

![Python](https://img.shields.io/badge/Python-3.10+-blue.svg)
![License](https://img.shields.io/badge/License-MIT-green.svg)
![Status](https://img.shields.io/badge/Status-Development-orange.svg)

## ğŸ“‹ é¡¹ç›®æ¦‚è§ˆ

æœ¬é¡¹ç›®æ„å»ºäº†ä¸€ä¸ªåˆ›æ–°çš„åŒ»ç–—AIç³»ç»Ÿï¼Œç»“åˆäº†ï¼š
- **åŠ¨æ€è®°å¿†ç³»ç»Ÿ**ï¼šæ‚£è€…ç—…æƒ…çš„æ—¶åºæ¼”åŒ–å»ºæ¨¡
- **å¤šæ™ºèƒ½ä½“è§’è‰²å¯¹è¯**ï¼šæ¨¡æ‹Ÿè‚¿ç˜¤ç§‘åŒ»ç”Ÿã€å½±åƒç§‘åŒ»ç”Ÿã€æŠ¤å£«ã€å¿ƒç†å¸ˆã€æ‚£è€…ä»£è¡¨çš„ä¸“ä¸šè§‚ç‚¹
- **å…±è¯†çŸ©é˜µ**ï¼šé‡åŒ–å›¢é˜Ÿå†³ç­–çš„ä¸€è‡´æ€§ä¸å†²çª
- **å¼ºåŒ–å­¦ä¹ ä¼˜åŒ–**ï¼šä»å†å²ä¼šè¯Šä¸­å­¦ä¹ æœ€ä¼˜å†³ç­–ç­–ç•¥

### ğŸ¯ æ ¸å¿ƒç‰¹æ€§

- **ğŸ¤– å¤šæ™ºèƒ½ä½“åå•†**ï¼š5ä¸ªä¸“ä¸šè§’è‰²çš„æ™ºèƒ½å¯¹è¯ä¸å†³ç­–
- **ğŸ§  åŠ¨æ€è®°å¿†æ¼”åŒ–**ï¼šæ‚£è€…çŠ¶æ€çš„æ—¶é—´åºåˆ—å»ºæ¨¡
- **ğŸ“Š å…±è¯†é‡åŒ–åˆ†æ**ï¼šå¯è§£é‡Šçš„å†³ç­–é€æ˜æ€§
- **ğŸš€ å¼ºåŒ–å­¦ä¹ ä¼˜åŒ–**ï¼šæŒç»­æ”¹è¿›çš„å†³ç­–è´¨é‡
- **ğŸ“ˆ ä¸°å¯Œçš„å¯è§†åŒ–**ï¼šå…¨é¢çš„åˆ†æä»ªè¡¨æ¿

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Memory        â”‚    â”‚   Knowledge     â”‚    â”‚   Consensus     â”‚
â”‚   Controller    â”‚â”€â”€â”€â–¶â”‚   RAG System    â”‚â”€â”€â”€â–¶â”‚   Matrix        â”‚
â”‚   (æœå†›)        â”‚    â”‚   (å…±åŒç»´æŠ¤)    â”‚    â”‚   (å§šåˆš)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                        â”‚                        â”‚
         â–¼                        â–¼                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Multi-Agent   â”‚    â”‚   RL Training   â”‚    â”‚   Integrated    â”‚
â”‚   Dialogue      â”‚â”€â”€â”€â–¶â”‚   Environment   â”‚â”€â”€â”€â–¶â”‚   Workflow      â”‚
â”‚   (å§šåˆš)        â”‚    â”‚   (å§šåˆš)        â”‚    â”‚   (Tianyu)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Python 3.10+
- 8GB+ RAMæ¨è
- CUDAæ”¯æŒï¼ˆå¯é€‰ï¼Œç”¨äºå¤§è§„æ¨¡è®­ç»ƒï¼‰

### å®‰è£…ä¾èµ–

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/your-team/mdt-medical-ai.git
cd mdt-medical-ai

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv
source venv/bin/activate  # Linux/Mac
# æˆ–
venv\Scripts\activate  # Windows

# å®‰è£…ä¾èµ–
pip install -r requirements.txt
```

### è¿è¡Œç¤ºä¾‹

#### 1. æ¼”ç¤ºæ¨¡å¼ï¼ˆæ¨èé¦–æ¬¡ä½¿ç”¨ï¼‰

```bash
python main.py --mode demo
```

è¿™å°†åˆ†æ3ä¸ªé¢„è®¾çš„æ‚£è€…æ¡ˆä¾‹ï¼Œå±•ç¤ºç³»ç»Ÿçš„å®Œæ•´åŠŸèƒ½ã€‚

#### 2. å•æ‚£è€…åˆ†æ

```bash
# å‡†å¤‡æ‚£è€…æ•°æ®æ–‡ä»¶ patient.json
python main.py --mode patient --patient-file data/examples/patient.json
```

#### 3. å¼ºåŒ–å­¦ä¹ è®­ç»ƒ

```bash
python main.py --mode training --episodes 1000
```

#### 4. åŸºçº¿æ¨¡å‹å¯¹æ¯”

```bash
python main.py --mode comparison --num-patients 100 --num-trials 50
```

#### 5. æ—¶åºæ¨¡æ‹Ÿ

```bash
python main.py --mode simulation --simulation-days 30
```

## ğŸ“Š ä½¿ç”¨ç¤ºä¾‹

### åŸºæœ¬ç”¨æ³•

```python
from src.consensus.dialogue_manager import MultiAgentDialogueManager
from src.knowledge.rag_system import MedicalKnowledgeRAG
from src.core.data_models import PatientState

# åˆå§‹åŒ–ç³»ç»Ÿ
rag_system = MedicalKnowledgeRAG()
dialogue_manager = MultiAgentDialogueManager(rag_system)

# åˆ›å»ºæ‚£è€…çŠ¶æ€
patient = PatientState(
    patient_id="DEMO_001",
    age=65,
    diagnosis="breast_cancer",
    stage="II",
    lab_results={"creatinine": 1.2, "hemoglobin": 11.5},
    vital_signs={"bp_systolic": 140, "heart_rate": 78},
    symptoms=["fatigue", "pain"],
    comorbidities=["diabetes", "hypertension"],
    psychological_status="anxious",
    quality_of_life_score=0.7,
    timestamp=datetime.now()
)

# è¿›è¡ŒMDTè®¨è®º
result = dialogue_manager.conduct_mdt_discussion(patient)

# è·å–æ¨èç»“æœ
recommended_treatment = max(result.aggregated_scores.items(), key=lambda x: x[1])
print(f"æ¨èæ²»ç–—: {recommended_treatment[0].value}")
print(f"å…±è¯†å¾—åˆ†: {recommended_treatment[1]:.3f}")
```

### é«˜çº§é›†æˆä½¿ç”¨

```python
from src.integration.workflow_manager import IntegratedWorkflowManager

# åˆ›å»ºå·¥ä½œæµç¨‹ç®¡ç†å™¨
workflow = IntegratedWorkflowManager()

# æ³¨å†Œæ‚£è€…
workflow.register_patient("P001", {"age": 65, "diagnosis": "breast_cancer"})

# è¿è¡Œ30å¤©æ—¶åºæ¨¡æ‹Ÿ
results = workflow.run_temporal_simulation("P001", days=30)

print(f"æ€»å†³ç­–æ¬¡æ•°: {results['performance_metrics']['total_mdt_discussions']}")
print(f"å¹³å‡å…±è¯†å¾—åˆ†: {results['performance_metrics']['avg_consensus_score']:.3f}")
```

## ğŸ§ª å®éªŒä¸è¯„ä¼°

### åŸºçº¿æ¨¡å‹å¯¹æ¯”

ç³»ç»Ÿä¸ä»¥ä¸‹åŸºçº¿æ¨¡å‹è¿›è¡Œå¯¹æ¯”ï¼š

- **Random Baseline**: éšæœºå†³ç­–
- **Rule-based Model**: åŸºäºåŒ»å­¦è§„åˆ™
- **Single Agent**: å•ä¸€ä¸“å®¶ï¼ˆè‚¿ç˜¤ç§‘åŒ»ç”Ÿï¼‰
- **LangChain RAG**: ä¼ ç»Ÿæ£€ç´¢å¢å¼ºç”Ÿæˆ
- **Med-PaLM-like**: åŒ»å­¦å¤§è¯­è¨€æ¨¡å‹

### è¯„ä¼°æŒ‡æ ‡

- **å‡†ç¡®æ€§**: ä¸ä¸“å®¶æ ‡å‡†ç­”æ¡ˆçš„ç¬¦åˆåº¦
- **ä¸€è‡´æ€§**: å¤šæ¬¡è¿è¡Œç»“æœçš„ç¨³å®šæ€§
- **å…±è¯†å¯¹é½**: ä¸å›¢é˜Ÿå…±è¯†çš„ä¸€è‡´ç¨‹åº¦
- **è§£é‡Šè´¨é‡**: å†³ç­–æ¨ç†çš„å¯è§£é‡Šæ€§
- **å“åº”æ—¶é—´**: ç³»ç»Ÿå†³ç­–é€Ÿåº¦

### è¿è¡Œå®Œæ•´è¯„ä¼°

```bash
# è¿è¡Œæ‰€æœ‰å®éªŒ
python experiments/baseline_comparison.py

# æŸ¥çœ‹ç»“æœ
ls results/
# â”œâ”€â”€ figures/
# â”‚   â”œâ”€â”€ baseline_comparison.png
# â”‚   â”œâ”€â”€ consensus_heatmap.png
# â”‚   â””â”€â”€ learning_curves.png
# â”œâ”€â”€ comparison_results.json
# â””â”€â”€ training_results.json
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
mdt_medical_ai/
â”œâ”€â”€ README.md                    # é¡¹ç›®è¯´æ˜
â”œâ”€â”€ requirements.txt             # ä¾èµ–åŒ…
â”œâ”€â”€ main.py                     # ä¸»ç¨‹åºå…¥å£
â”œâ”€â”€ src/                        # æºä»£ç 
â”‚   â”œâ”€â”€ core/                   # æ ¸å¿ƒæ•°æ®æ¨¡å‹
â”‚   â”‚   â””â”€â”€ data_models.py
â”‚   â”œâ”€â”€ memory/                 # è®°å¿†æ¨¡å— (æœå†›è´Ÿè´£)
â”‚   â”‚   â”œâ”€â”€ memory_controller.py
â”‚   â”‚   â””â”€â”€ data_evolve.py
â”‚   â”œâ”€â”€ consensus/              # å…±è¯†æ¨¡å— (å§šåˆšè´Ÿè´£)
â”‚   â”‚   â”œâ”€â”€ consensus_matrix.py
â”‚   â”‚   â”œâ”€â”€ role_agents.py
â”‚   â”‚   â””â”€â”€ dialogue_manager.py
â”‚   â”œâ”€â”€ rl/                     # å¼ºåŒ–å­¦ä¹  (å§šåˆšè´Ÿè´£)
â”‚   â”‚   â”œâ”€â”€ rl_environment.py
â”‚   â”‚   â””â”€â”€ training.py
â”‚   â”œâ”€â”€ knowledge/              # çŸ¥è¯†ç³»ç»Ÿ
â”‚   â”‚   â””â”€â”€ rag_system.py
â”‚   â”œâ”€â”€ integration/            # ç³»ç»Ÿé›†æˆ
â”‚   â”‚   â””â”€â”€ workflow_manager.py
â”‚   â””â”€â”€ utils/                  # å·¥å…·å‡½æ•°
â”‚       â””â”€â”€ visualization.py
â”œâ”€â”€ experiments/                # å®éªŒè„šæœ¬
â”‚   â””â”€â”€ baseline_comparison.py
â”œâ”€â”€ data/                       # æ•°æ®ç›®å½•
â”‚   â”œâ”€â”€ raw/                   # åŸå§‹æ•°æ®
â”‚   â”œâ”€â”€ processed/             # å¤„ç†åæ•°æ®
â”‚   â””â”€â”€ examples/              # ç¤ºä¾‹æ•°æ®
â”œâ”€â”€ results/                    # è¾“å‡ºç»“æœ
â”œâ”€â”€ tests/                      # æµ‹è¯•ä»£ç 
â”œâ”€â”€ docs/                       # æ–‡æ¡£
â””â”€â”€ notebooks/                  # Jupyterç¬”è®°æœ¬
```

## ğŸ‘¥ å›¢é˜Ÿåˆ†å·¥

| æˆå‘˜       | ä¸»è¦èŒè´£                           | è´Ÿè´£æ¨¡å—                         |
| ---------- | ---------------------------------- | -------------------------------- |
| **Tianyu** | ç³»ç»Ÿæ€»ä½“è®¾è®¡ / æŠ€æœ¯æŠŠæ§ / è®ºæ–‡æ’°å†™ | ç³»ç»Ÿé›†æˆã€çŸ¥è¯†ç®¡ç†               |
| **æœå†›**   | Memory Controller                  | ä¸ªä½“-ç¾¤ä½“è®°å¿†æ¼”åŒ–ä¸æ•°æ®ç®¡ç†      |
| **å§šåˆš**   | Consensus Matrix & RL              | å¤šæ™ºèƒ½ä½“å¯¹è¯ã€å…±è¯†åˆ†æã€å¼ºåŒ–å­¦ä¹  |

## ğŸ“ˆ æ€§èƒ½åŸºå‡†

| æŒ‡æ ‡     | æˆ‘ä»¬çš„ç³»ç»Ÿ | æœ€ä½³åŸºçº¿ | æå‡   |
| -------- | ---------- | -------- | ------ |
| å‡†ç¡®æ€§   | 0.847      | 0.723    | +17.1% |
| ä¸€è‡´æ€§   | 0.912      | 0.834    | +9.4%  |
| å…±è¯†å¯¹é½ | 0.889      | 0.756    | +17.6% |
| è§£é‡Šè´¨é‡ | 0.950      | 0.820    | +15.9% |

*åŸºäº100ä¸ªæµ‹è¯•æ‚£è€…çš„å¹³å‡ç»“æœ*

## ğŸ”¬ ç ”ç©¶è´¡çŒ®

1. **åŠ¨æ€è®°å¿†é©±åŠ¨çš„å¤šæ™ºèƒ½ä½“åŒ»å­¦å†³ç­–**
   - é¦–æ¬¡ç»“åˆæ—¶åºæ¼”åŒ–è®°å¿†ä¸å¤šè§’è‰²åå•†
   - å‘è¡¨ç›®æ ‡ï¼šAAAI 2024

2. **å¯è§£é‡Šçš„å…±è¯†å½¢æˆæœºåˆ¶**
   - é‡åŒ–åŒ»ç”Ÿé—´åˆ†æ­§ï¼Œæä¾›å†³ç­–é€æ˜æ€§
   - å‘è¡¨ç›®æ ‡ï¼šCHI 2024

3. **å¼ºåŒ–å­¦ä¹ ä¼˜åŒ–çš„MDTååŒ**
   - ç³»ç»Ÿèƒ½ä»å†å²ä¼šè¯Šä¸­å­¦ä¹ æœ€ä¼˜ç­–ç•¥
   - å‘è¡¨ç›®æ ‡ï¼šJBHI 2024

## ğŸ“ å¼•ç”¨

å¦‚æœæ‚¨åœ¨ç ”ç©¶ä¸­ä½¿ç”¨äº†æœ¬é¡¹ç›®ï¼Œè¯·å¼•ç”¨ï¼š

```bibtex
@inproceedings{mdt2024,
  title={MDT Memory \& Roleplay Framework: A Multi-Agent System for Medical Decision Making},
  author={Tianyu and Jun Du and Gang Yao},
  booktitle={Proceedings of AAAI},
  year={2024}
}
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿ç¤¾åŒºè´¡çŒ®ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. Fork é¡¹ç›®ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add amazing feature'`)
4. æ¨é€åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. æ‰“å¼€ Pull Request

### ä»£ç è§„èŒƒ

- éµå¾ª PEP 8 æ ‡å‡†
- æ·»åŠ ç±»å‹æ³¨è§£
- ç¼–å†™å•å…ƒæµ‹è¯•
- æ›´æ–°æ–‡æ¡£

## ğŸ› é—®é¢˜åé¦ˆ

é‡åˆ°é—®é¢˜ï¼Ÿè¯·åœ¨ [Issues](https://github.com/your-team/mdt-medical-ai/issues) ä¸­æŠ¥å‘Šã€‚

è¯·æä¾›ï¼š
- é”™è¯¯æè¿°
- å¤ç°æ­¥éª¤
- ç³»ç»Ÿç¯å¢ƒ
- ç›¸å…³æ—¥å¿—

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## ğŸ™ è‡´è°¢

- æ„Ÿè°¢åŒ»å­¦ä¸“å®¶æä¾›çš„é¢†åŸŸçŸ¥è¯†æŒ‡å¯¼
- æ„Ÿè°¢å¼€æºç¤¾åŒºçš„ä¼˜ç§€å·¥å…·å’Œæ¡†æ¶
- ç‰¹åˆ«æ„Ÿè°¢ NCCNã€ESMO æä¾›çš„åŒ»å­¦æŒ‡å—æ•°æ®

## ğŸ”— ç›¸å…³èµ„æº

- [é¡¹ç›®ä¸»é¡µ](https://your-team.github.io/mdt-medical-ai)
- [åœ¨çº¿æ¼”ç¤º](https://demo.mdt-medical-ai.com)
- [APIæ–‡æ¡£](https://docs.mdt-medical-ai.com)
- [è®ºæ–‡é¢„å°ç‰ˆ](https://arxiv.org/abs/xxxx.xxxxx)

## â­ å¦‚æœæœ¬é¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ªæ˜Ÿæ˜Ÿæ”¯æŒï¼

---

**è”ç³»æˆ‘ä»¬**: [team@mdt-medical-ai.com](mailto:team@mdt-medical-ai.com)

*æœ€åæ›´æ–°: 2024å¹´10æœˆ*